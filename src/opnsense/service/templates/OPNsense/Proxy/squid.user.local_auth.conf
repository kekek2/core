{{SmartSoft.ProxySSO.EnableSSO}}
{% if (helpers.exists('SmartSoft.ProxySSO.EnableBasic') and SmartSoft.ProxySSO.EnableBasic == '1')
   or (helpers.exists('SmartSoft.ProxySSO.EnableSSO') and SmartSoft.ProxySSO.EnableSSO == '0')
   or not helpers.exists('SmartSoft.ProxySSO.EnableBasic') or not helpers.exists('SmartSoft.ProxySSO.EnableSSO') %}
# Configure Local User Authentication helper
auth_param basic program /usr/local/libexec/squid/basic_pam_auth -o
{% if helpers.exists('OPNsense.proxy.forward.authentication.realm') %}
auth_param basic realm {{OPNsense.proxy.forward.authentication.realm}}
{% endif %}
{% if helpers.exists('OPNsense.proxy.forward.authentication.credentialsttl') %}
auth_param basic credentialsttl {{OPNsense.proxy.forward.authentication.credentialsttl}} hours
{% endif %}
{% if helpers.exists('OPNsense.proxy.forward.authentication.children') %}
auth_param basic children {{OPNsense.proxy.forward.authentication.children}}
{% endif %}
auth_param basic utf8 on
# ACL - Local Authorized Users - local_auth
{% endif %}
acl local_auth proxy_auth REQUIRED
